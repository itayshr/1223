<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ניהול תיק לבית ספר</title>
    <style>
        /* General Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            margin: 20px;
            background-color: #e9ecef;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }

        #app {
            max-width: 500px;
            margin: auto;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            background-color: #fff;
            transition: background-color 0.3s, color 0.3s;
            animation: fadeIn 0.5s ease-in-out;
        }

        input, button, select {
            margin: 5px;
            padding: 10px;
            width: 90%;
            border: none;
            border-radius: 8px;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        button {
            background-color: #007BFF;
            color: #fff;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            margin: 5px;
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #0056b3;
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.95);
        }

        button.secondary {
            background-color: #6c757d;
        }

        button.secondary:hover {
            background-color: #5a6268;
        }

        button.danger {
            background-color: #dc3545;
        }

        button.danger:hover {
            background-color: #c82333;
        }

        .hidden {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .visible {
            display: block;
            opacity: 1;
        }

        .item-list {
            text-align: left;
            margin-top: 20px;
        }

        #itemList li {
            cursor: pointer;
        }

        h2, h3 {
            color: #0056b3;
            margin-bottom: 20px;
        }

        .dark-mode {
            background-color: #333;
            color: #fff;
        }

        .dark-mode #app {
            background-color: #444;
            color: #fff;
        }

        .dark-mode button {
            background-color: #555;
        }

        .dark-mode input, .dark-mode select {
            background-color: #666;
            color: #fff;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.3s;
            animation: fadeIn 0.3s ease-in-out;
        }

        .toast.show {
            opacity: 1;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 600px) {
            #app {
                width: 100%;
                padding: 10px;
            }

            button, input, select {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Language Selection Screen -->
        <div id="languageScreen" class="visible">
            <h2>בחר שפה</h2>
            <select id="languageSelect" onchange="changeLanguage()">
                <option value="he">עברית</option>
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="ar">العربية</option>
                <option value="ru">Русский</option>
            </select>
            <button onclick="goToLoginScreen()">המשך</button>
        </div>

        <!-- Login Screen -->
        <div id="loginScreen" class="hidden">
            <h2 id="loginTitle">התחבר למערכת בית הספר</h2>
            <input type="text" id="username" placeholder="שם משתמש">
            <input type="password" id="password" placeholder="סיסמה">
            <button onclick="login()" id="loginButton">התחבר</button>
            <button onclick="register()" class="secondary" id="registerButton">הירשם</button>
            <p id="loginMessage"></p>
        </div>

        <!-- School Bag Management Screen -->
        <div id="bagScreen" class="hidden">
            <h2 id="bagTitle">ניהול תיק לבית הספר</h2>

            <!-- Weather and Outfit Suggestion -->
            <h3 id="outfitTitle">המלצת לבוש:</h3>
            <div id="weatherContainer">
                <p id="weather"></p>
                <p id="outfitSuggestion"></p>
            </div>

            <!-- Schedule Management -->
            <div id="schedule">
                <h3 id="scheduleTitle">מערכת שעות:</h3>
                <div id="days">
                    <div>ראשון: <select id="day1" multiple></select><button onclick="saveDay(1)">שמור</button></div>
                    <div>שני: <select id="day2" multiple></select><button onclick="saveDay(2)">שמור</button></div>
                    <div>שלישי: <select id="day3" multiple></select><button onclick="saveDay(3)">שמור</button></div>
                    <div>רביעי: <select id="day4" multiple></select><button onclick="saveDay(4)">שמור</button></div>
                    <div>חמישי: <select id="day5" multiple></select><button onclick="saveDay(5)">שמור</button></div>
                </div>
            </div>

            <!-- Reminder Feature -->
            <h3 id="reminderTitle">תזכורת למחר:</h3>
            <input type="text" id="tomorrowReminder" placeholder="הזן תזכורת...">
            <button id="setReminderBtn" onclick="setReminder()">שמור תזכורת</button>
            <div id="reminderDisplay"></div>

            <!-- Additional Buttons -->
            <button onclick="showHelp()" class="secondary">עזרה</button>
            <button onclick="showSettings()" class="secondary">הגדרות</button>
            <button onclick="showAbout()" class="secondary">אודות</button>

            <!-- Logout Button -->
            <button onclick="logout()" class="danger" id="logoutButton">התנתק</button>

            <!-- Saved Message and Tomorrow Items -->
            <div id="savedMessage"></div>
            <div id="tomorrowItems" style="margin-top:20px; font-weight:bold;"></div>
        </div>
    </div>

    <!-- Toast Message -->
    <div id="toast" class="toast"></div>

    <script>
        const subjects = ['עברית', 'מתמטיקה', 'אנגלית', 'היסטוריה', 'מדעים', 'ספורט', 'תורה', 'מוסיקה', 'אחר'];
        const weatherAPIKey = 'bfba7f78869e4222b89154845251302';  // API key for weather

        let currentUser = '';
        let currentLanguage = 'he'; // Default language is Hebrew
        let users = JSON.parse(localStorage.getItem("users")) || [];

        const translations = {
            he: {
                loginTitle: "התחבר למערכת בית הספר",
                bagTitle: "ניהול תיק לבית הספר",
                outfitTitle: "המלצת לבוש:",
                scheduleTitle: "מערכת שעות:",
                reminderTitle: "תזכורת למחר:",
                loginButton: "התחבר",
                registerButton: "הירשם",
                logoutButton: "התנתק",
                saveButton: "שמור",
                reminderPlaceholder: "הזן תזכורת...",
                savedMessage: "היום נשמר עם המקצועות:",
                errorMessage: "שם משתמש או סיסמה שגויים"
            },
            en: {
                loginTitle: "Login to School System",
                bagTitle: "School Bag Management",
                outfitTitle: "Outfit Suggestion:",
                scheduleTitle: "Schedule:",
                reminderTitle: "Reminder for Tomorrow:",
                loginButton: "Login",
                registerButton: "Register",
                logoutButton: "Logout",
                saveButton: "Save",
                reminderPlaceholder: "Enter reminder...",
                savedMessage: "Today saved with the following subjects:",
                errorMessage: "Incorrect username or password"
            },
            es: {
                loginTitle: "Iniciar sesión en el sistema escolar",
                bagTitle: "Gestión de la mochila escolar",
                outfitTitle: "Sugerencia de vestimenta:",
                scheduleTitle: "Horario:",
                reminderTitle: "Recordatorio para mañana:",
                loginButton: "Iniciar sesión",
                registerButton: "Registrarse",
                logoutButton: "Cerrar sesión",
                saveButton: "Guardar",
                reminderPlaceholder: "Ingresa un recordatorio...",
                savedMessage: "Hoy guardado con las siguientes materias:",
                errorMessage: "Nombre de usuario o contraseña incorrectos"
            },
            ar: {
                loginTitle: "تسجيل الدخول إلى نظام المدرسة",
                bagTitle: "إدارة حقيبة المدرسة",
                outfitTitle: "اقتراح الملابس:",
                scheduleTitle: "الجدول الزمني:",
                reminderTitle: "تذكير لليوم التالي:",
                loginButton: "تسجيل الدخول",
                registerButton: "سجل",
                logoutButton: "تسجيل الخروج",
                saveButton: "حفظ",
                reminderPlaceholder: "أدخل تذكير...",
                savedMessage: "اليوم تم حفظه بالمواد التالية:",
                errorMessage: "اسم المستخدم أو كلمة المرور غير صحيحة"
            },
            ru: {
                loginTitle: "Войти в школьную систему",
                bagTitle: "Управление школьным рюкзаком",
                outfitTitle: "Предложение по одежде:",
                scheduleTitle: "Расписание:",
                reminderTitle: "Напоминание на завтра:",
                loginButton: "Войти",
                registerButton: "Зарегистрироваться",
                logoutButton: "Выйти",
                saveButton: "Сохранить",
                reminderPlaceholder: "Введите напоминание...",
                savedMessage: "Сегодня сохранено с такими предметами:",
                errorMessage: "Неверное имя пользователя или пароль"
            }
        };

        // Language change function
        function changeLanguage() {
            const language = document.getElementById('languageSelect').value;
            currentLanguage = language;
            loadTextByLanguage(language);
        }

        // Function to load text according to the selected language
        function loadTextByLanguage(language) {
            document.getElementById('loginTitle').textContent = translations[language].loginTitle;
            document.getElementById('bagTitle').textContent = translations[language].bagTitle;
            document.getElementById('outfitTitle').textContent = translations[language].outfitTitle;
            document.getElementById('scheduleTitle').textContent = translations[language].scheduleTitle;
            document.getElementById('reminderTitle').textContent = translations[language].reminderTitle;
            document.getElementById('loginButton').textContent = translations[language].loginButton;
            document.getElementById('registerButton').textContent = translations[language].registerButton;
            document.getElementById('logoutButton').textContent = translations[language].logoutButton;
            document.getElementById('setReminderBtn').textContent = translations[language].saveButton;
            document.getElementById('tomorrowReminder').placeholder = translations[language].reminderPlaceholder;
        }

        // Initialize language settings
        window.onload = function() {
            loadTextByLanguage(currentLanguage);
            loadTheme();
        };

        // Go to login screen after language selection
        function goToLoginScreen() {
            document.getElementById('languageScreen').classList.remove('visible');
            document.getElementById('languageScreen').classList.add('hidden');
            setTimeout(() => {
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('loginScreen').classList.add('visible');
            }, 500);
        }

        // Login Function
        function login() {
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;
            const storedUser = users.find(u => u.username === user && u.password === pass);

            if (storedUser) {
                currentUser = user;
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('bagScreen').classList.remove('hidden');
                loadSchedule();
                loadReminder();
                showToast("ברוך הבא, " + user + "!");
            } else {
                document.getElementById('loginMessage').textContent = translations[currentLanguage].errorMessage;
            }
        }

        // Register Function
        function register() {
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;

            if (users.some(u => u.username === user)) {
                showToast("שם המשתמש כבר קיים");
                return;
            }

            users.push({ username: user, password: pass });
            localStorage.setItem("users", JSON.stringify(users));
            showToast("המשתמש נרשם בהצלחה!");
        }

        // Logout Function
        function logout() {
            currentUser = '';
            document.getElementById('bagScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        // Save schedule for the day
        function saveDay(day) {
            const subjectList = Array.from(document.getElementById(`day${day}`).selectedOptions).map(option => option.value);
            localStorage.setItem(`${currentUser}_day${day}`, JSON.stringify(subjectList));
            showToast("לוח הזמנים נשמר בהצלחה!");
        }

        // Load schedule when logged in
        function loadSchedule() {
            for (let i = 1; i <= 5; i++) {
                const daySelect = document.getElementById(`day${i}`);
                daySelect.innerHTML = '';
                subjects.forEach(subject => {
                    let option = document.createElement('option');
                    option.value = subject;
                    option.textContent = subject;
                    daySelect.appendChild(option);
                });
                const savedSubjects = JSON.parse(localStorage.getItem(`${currentUser}_day${i}`)) || [];
                savedSubjects.forEach(subject => {
                    const option = Array.from(daySelect.options).find(opt => opt.value === subject);
                    if (option) option.selected = true;
                });
            }
        }

        // Set reminder
        function setReminder() {
            const reminder = document.getElementById('tomorrowReminder').value;
            localStorage.setItem(`${currentUser}_reminder`, reminder);
            loadReminder();
            showToast("תזכורת נשמרה בהצלחה!");
        }

        // Load reminder
        function loadReminder() {
            const reminder = localStorage.getItem(`${currentUser}_reminder`);
            if (reminder) {
                document.getElementById('reminderDisplay').textContent = `תזכורת: ${reminder}`;
            }
        }

        // Show toast message
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Load theme from localStorage
        function loadTheme() {
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme === "dark") {
                document.body.classList.add("dark-mode");
            }
        }

        // Toggle dark mode
        function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");
            localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
        }

        // Add dark mode toggle button
        const darkModeToggle = document.createElement('button');
        darkModeToggle.textContent = "מצב כהה";
        darkModeToggle.style.position = "fixed";
        darkModeToggle.style.top = "10px";
        darkModeToggle.style.right = "10px";
        darkModeToggle.onclick = toggleDarkMode;
        document.body.appendChild(darkModeToggle);

        // Additional Functions
        function showHelp() {
            alert("כאן תוכל למצוא מידע על אופן השימוש במערכת.");
        }

        function showSettings() {
            alert("כאן תוכל לשנות את ההגדרות שלך.");
        }

        function showAbout() {
            alert("זוהי מערכת לניהול תיק בית ספר. נבנתה עם ❤️ על ידי צוות הפיתוח.");
        }
    </script>
</body>
</html>
